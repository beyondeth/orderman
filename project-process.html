<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Market App - í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #7f8c8d;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
            background: #fff;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            padding: 20px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .tech-stack {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Order Market App - í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ê¸°ëŠ¥ íë¦„ ë¶„ì„</h1>
        
        <div class="highlight">
            <strong>ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”:</strong> Flutter + Firebase ê¸°ë°˜ì˜ B2B ì£¼ë¬¸ ê´€ë¦¬ ì•±ìœ¼ë¡œ, êµ¬ë§¤ì(Buyer)ì™€ íŒë§¤ì(Seller) ê°„ì˜ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
        </div>

        <h2>ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜</h2>
        <div class="mermaid">
graph TB
    subgraph "Frontend - Flutter App"
        A[main.dart] --> B[GetX App]
        B --> C[Routes & Pages]
        C --> D[Views]
        D --> E[Controllers]
        E --> F[Services]
        F --> G[Models]
    end
    
    subgraph "Backend - Firebase"
        H[Firebase Auth]
        I[Cloud Firestore]
        J[Firebase Storage]
    end
    
    F --> H
    F --> I
    F --> J
    
    subgraph "State Management"
        K[GetX Controllers]
        L[Global State]
        M[Cache Manager]
    end
    
    E --> K
    K --> L
    L --> M
        </div>

        <h2>ğŸ”„ ì‚¬ìš©ì ì¸ì¦ íë¦„</h2>
        <div class="mermaid">
sequenceDiagram
    participant U as User
    participant S as SplashController
    participant A as AuthService
    participant F as Firebase Auth
    participant D as Firestore
    
    U->>S: ì•± ì‹œì‘
    S->>A: ì¸ì¦ ìƒíƒœ í™•ì¸
    A->>F: authStateChanges()
    
    alt ë¡œê·¸ì¸ëœ ì‚¬ìš©ì
        F->>A: User ê°ì²´ ë°˜í™˜
        A->>D: ì‚¬ìš©ì ë°ì´í„° ì¡°íšŒ
        D->>A: UserModel ë°˜í™˜
        A->>S: ì¸ì¦ ì™„ë£Œ
        S->>U: ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
    else ë¯¸ë¡œê·¸ì¸ ì‚¬ìš©ì
        F->>A: null ë°˜í™˜
        A->>S: ë¯¸ì¸ì¦ ìƒíƒœ
        S->>U: ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
    end
        </div>

        <h2>ğŸ‘¥ ì‚¬ìš©ì ì—­í• ë³„ ê¸°ëŠ¥ êµ¬ì¡°</h2>
        <div class="mermaid">
graph LR
    subgraph "ê³µí†µ ê¸°ëŠ¥"
        A1[íšŒì›ê°€ì…/ë¡œê·¸ì¸]
        A2[í”„ë¡œí•„ ê´€ë¦¬]
        A3[ì„¤ì •]
    end
    
    subgraph "êµ¬ë§¤ì(Buyer) ê¸°ëŠ¥"
        B1[íŒë§¤ì ì—°ê²° ìš”ì²­]
        B2[ìƒí’ˆ ëª©ë¡ ì¡°íšŒ]
        B3[ì£¼ë¬¸ ìƒì„±]
        B4[ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ]
        B5[ì£¼ë¬¸ ìƒíƒœ í™•ì¸]
    end
    
    subgraph "íŒë§¤ì(Seller) ê¸°ëŠ¥"
        C1[ì—°ê²° ìš”ì²­ ê´€ë¦¬]
        C2[ìƒí’ˆ ê´€ë¦¬]
        C3[ì£¼ë¬¸ ì ‘ìˆ˜/ì²˜ë¦¬]
        C4[ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸]
        C5[êµ¬ë§¤ì ê´€ë¦¬]
    end
    
    A1 --> B1
    A1 --> C1
    B1 --> B2
    B2 --> B3
    C1 --> C2
    C2 --> C3
        </div>

        <h2>ğŸ“± í™”ë©´ ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°</h2>
        <div class="mermaid">
graph TD
    A[Splash Screen] --> B{ì¸ì¦ ìƒíƒœ}
    B -->|ë¯¸ì¸ì¦| C[Login Screen]
    B -->|ì¸ì¦ë¨| D[Main Screen]
    
    C --> E[Register Screen]
    E --> F[Role Selection]
    F --> G[Profile Setup]
    G --> D
    
    D --> H{ì‚¬ìš©ì ì—­í• }
    H -->|Buyer| I[Buyer Home]
    H -->|Seller| J[Seller Home]
    
    I --> K[Order Tab]
    I --> L[History Tab]
    I --> M[Profile Tab]
    
    J --> N[Products Tab]
    J --> O[Orders Tab]
    J --> P[Connections Tab]
    
    K --> Q[Order Creation]
    N --> R[Product Management]
    O --> S[Order Processing]
        </div>

        <h2>ğŸ”§ ì„œë¹„ìŠ¤ ê³„ì¸µ êµ¬ì¡°</h2>
        <div class="mermaid">
graph TB
    subgraph "Core Services"
        A[AuthService]
        B[FirebaseService]
        C[ProductService]
        D[OrderService]
        E[ConnectionService]
        F[EnvService]
    end
    
    subgraph "State Management"
        G[GlobalStateController]
        H[CacheManager]
        I[AppState]
    end
    
    subgraph "Controllers"
        J[AuthControllers]
        K[BuyerControllers]
        L[SellerControllers]
        M[CommonControllers]
    end
    
    A --> G
    B --> A
    C --> B
    D --> B
    E --> B
    F --> B
    
    G --> H
    G --> I
    
    J --> A
    K --> C
    K --> D
    K --> E
    L --> C
    L --> D
    L --> E
    M --> A
        </div>

        <h2>ğŸ“Š ë°ì´í„° ëª¨ë¸ ê´€ê³„</h2>
        <div class="mermaid">
erDiagram
    UserModel {
        string uid PK
        string email
        string displayName
        UserRole role
        string phoneNumber
        string businessName
        string address
        DateTime createdAt
    }
    
    ProductModel {
        string id PK
        string sellerId FK
        string name
        string unit
        int price
        bool isActive
        int orderIndex
        DateTime createdAt
    }
    
    OrderModel {
        string id PK
        string buyerId FK
        string sellerId FK
        string buyerName
        string sellerName
        OrderStatus status
        DateTime orderDate
        int totalAmount
        string notes
    }
    
    OrderItemModel {
        string productId FK
        string productName
        string unit
        int quantity
        int unitPrice
        int totalPrice
    }
    
    ConnectionModel {
        string id PK
        string buyerId FK
        string sellerId FK
        ConnectionStatus status
        DateTime createdAt
    }
    
    UserModel ||--o{ ProductModel : "íŒë§¤ìê°€ ìƒí’ˆ ì†Œìœ "
    UserModel ||--o{ OrderModel : "êµ¬ë§¤ìê°€ ì£¼ë¬¸ ìƒì„±"
    UserModel ||--o{ OrderModel : "íŒë§¤ìê°€ ì£¼ë¬¸ ì²˜ë¦¬"
    OrderModel ||--o{ OrderItemModel : "ì£¼ë¬¸ì´ ì£¼ë¬¸í•­ëª© í¬í•¨"
    ProductModel ||--o{ OrderItemModel : "ìƒí’ˆì´ ì£¼ë¬¸í•­ëª©ì— í¬í•¨"
    UserModel ||--o{ ConnectionModel : "êµ¬ë§¤ì-íŒë§¤ì ì—°ê²°"
        </div>

        <h2>ğŸ”„ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ íë¦„</h2>
        <div class="mermaid">
sequenceDiagram
    participant B as Buyer
    participant BC as BuyerController
    participant OS as OrderService
    participant FS as Firestore
    participant SC as SellerController
    participant S as Seller
    
    B->>BC: ì£¼ë¬¸ ìƒì„± ìš”ì²­
    BC->>OS: createOrder()
    OS->>FS: ì£¼ë¬¸ ë°ì´í„° ì €ì¥
    FS-->>OS: ì €ì¥ ì™„ë£Œ
    OS-->>BC: ì£¼ë¬¸ ìƒì„± ì™„ë£Œ
    BC-->>B: ì£¼ë¬¸ ì™„ë£Œ ì•Œë¦¼
    
    Note over FS: ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ í™œì„±í™”
    
    FS->>SC: ìƒˆ ì£¼ë¬¸ ì•Œë¦¼
    SC->>S: ì£¼ë¬¸ ì ‘ìˆ˜ ì•Œë¦¼
    S->>SC: ì£¼ë¬¸ ìƒíƒœ ë³€ê²½
    SC->>OS: updateOrderStatus()
    OS->>FS: ìƒíƒœ ì—…ë°ì´íŠ¸
    FS->>BC: ìƒíƒœ ë³€ê²½ ì•Œë¦¼
    BC->>B: ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸
        </div>

        <div class="tech-stack">
            <h2>ğŸš€ ê¸°ìˆ  ìŠ¤íƒ</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>Frontend</h3>
                    <ul>
                        <li>Flutter SDK</li>
                        <li>GetX (ìƒíƒœê´€ë¦¬)</li>
                        <li>Material Design</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>Backend</h3>
                    <ul>
                        <li>Firebase Auth</li>
                        <li>Cloud Firestore</li>
                        <li>Firebase Storage</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>Architecture</h3>
                    <ul>
                        <li>Clean Architecture</li>
                        <li>MVVM Pattern</li>
                        <li>Dependency Injection</li>
                    </ul>
                </div>
            </div>
        </div>

        <h2>ğŸ¯ í•µì‹¬ íŠ¹ì§•</h2>
        <div class="feature-grid">
            <div class="feature-card">
                <h3>ğŸ”„ ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬</h3>
                <p>GetXë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ”¥ ì‹¤ì‹œê°„ ë™ê¸°í™”</h3>
                <p>Firebase ë¦¬ìŠ¤ë„ˆë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ‘¥ ì—­í•  ê¸°ë°˜ ì ‘ê·¼</h3>
                <p>êµ¬ë§¤ì/íŒë§¤ì ê¶Œí•œë³„ ê¸°ëŠ¥ ë¶„ë¦¬</p>
            </div>
            <div class="feature-card">
                <h3>ğŸš€ ì„±ëŠ¥ ìµœì í™”</h3>
                <p>ìºì‹± ë° ë©”ëª¨ë¦¬ ê´€ë¦¬ ì „ëµ</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ” ë³´ì•ˆ</h3>
                <p>Firebase Security Rules ì ìš©</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ“± ë°˜ì‘í˜• ë””ìì¸</h3>
                <p>ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›</p>
            </div>
        </div>

        <div class="highlight">
            <h3>ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •</h3>
            <ul>
                <li><strong>Flutter SDK:</strong> ìµœì‹  ì•ˆì • ë²„ì „</li>
                <li><strong>Firebase Project:</strong> ì¸ì¦, Firestore, Storage í™œì„±í™”</li>
                <li><strong>GetX:</strong> ìƒíƒœ ê´€ë¦¬ ë° ë¼ìš°íŒ…</li>
                <li><strong>Environment Variables:</strong> .env íŒŒì¼ì„ í†µí•œ ì„¤ì • ê´€ë¦¬</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });
    </script>
</body>
</html>
